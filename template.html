<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<style>
body { 
  font-family: DejaVuSans; 
  font-size: 12px; 
  line-height: 1.4; 
}

.message { 
  margin-bottom: 12px; 
  display: block;
}

.date { 
  font-size: 6px; 
  color: #888888; 
  margin-bottom: 2px;
  display: block;
}

.meta { 
  color: #555555; 
  font-size: 9px; 
  display: block;
}

.sender { 
  font-weight: bold; 
}

.text { 
  margin-top: 4px; 
  margin-left: 0; 
  white-space: pre-wrap; /* Zeilenumbrüche und Absätze erhalten */
  display: block;
}
</style>
</head>
<body>
<h1>{{ conversation_label }}</h1>
{% for msg in messages %}
<div class="message">
  <div class="meta date">
    {{ msg.date }} 
    <span class="sender">{{ msg.sender }}</span>
  </div>
  <div class="text">{{ msg.text }}</div>
  {% if msg.attachment and msg.mime and msg.mime.startswith('image') %}
    <img src="{{ msg.attachment }}" width="100">
  {% elif msg.attachment %}
    <div>[Attachment: {{ msg.attachment_name }}]</div>
  {% endif %}
</div>
{% endfor %}
</body>
</html>
